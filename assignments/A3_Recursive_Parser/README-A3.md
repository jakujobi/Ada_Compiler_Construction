# Recursive Descent Parser for Ada Subset - John Akujobi A3


```cardlink
url: https://github.com/jakujobi/Ada_Compiler_Construction/tree/main/A3_Recursive_Parser
title: "Ada_Compiler_Construction/A3_Recursive_Parser at main · jakujobi/Ada_Compiler_Construction"
description: "Compiler for ADA written in python for CSC 446. Contribute to jakujobi/Ada_Compiler_Construction development by creating an account on GitHub."
host: github.com
favicon: https://github.githubassets.com/favicons/favicon.svg
image: https://opengraph.githubassets.com/747d7d84f5371f2a6a1ef9b8a95667e55c6b1fad44b1364a7c94d2a7f526020c/jakujobi/Ada_Compiler_Construction
```

Welcome to the **Recursive Descent Parser** project! This project is a continuation of a compiler construction course, focusing on parsing a subset of the **Ada programming language**. The parser takes a **list of tokens** generated by the Lexical Analyzer and verifies **syntactic correctness** based on a **context-free grammar (CFG)**.

The parser is designed to be **modular**, **error-resilient**, and **extensible**, allowing future enhancements such as **semantic analysis** and **code generation**.

---
## Overview
### What This Parser Does
- Reads a list of **tokens** generated by the Lexical Analyzer.
- Uses **Recursive Descent Parsing** to verify syntactic correctness.
- **Reports errors** and optionally stops or attempts **panic-mode recovery**.
- **Constructs and prints a Parse Tree** with **indentation and structured connectors**.
- Produces a **summary report** with details of parsing success or failure.

### Key Features
- **Recursive Descent Parsing** with methods corresponding to **non-terminals** in the CFG.  
- **Error Handling**:
	- Option to **stop on error** and ask if the user wants to continue.
	- **Panic-mode recovery** (skips tokens until a safe recovery point). 
- **Modular Design** _(Easily extendable for future Ada compiler features)._
#### Easter Egg!!!🪺🐣
 **Parse Tree Construction** _(🪺🐣)_:
- Displays parse structure using **indented tree format**.
- Uses `├──`, `└──`, and `│` for **better readability**.  

---
## Project Structure
- **`RDParser.py`** - Implements the Recursive Descent Parser.
    - Reads tokens from the Lexical Analyzer.
    - Implements parsing methods for each **non-terminal** in the CFG.
    - Supports **error handling**, **panic-mode recovery**, and **parse tree printing**.

- **`ParseTreePrinter.py`** - Handles the **formatted printing of the parse tree** with indentation and connectors.
    
- **`JohnA3.py`** - The **driver program** that:
    - Reads the source code file.
    - Invokes the Lexical Analyzer to generate tokens.
    - Calls the Recursive Descent Parser.
    - Prints **tokens**, **errors**, and the **parse tree**.

- **`Logger.py`** - A **singleton logger** that logs:
    - Parsing steps.
    - Matched tokens.
    - Errors and recovery attempts.

- **`Definitions.py`** - Defines **token types** and provides mappings for reserved words and regex patterns.
    
- **`Token.py`** - Represents **each token** with attributes such as:
    - `token_type`
    - `lexeme`
    - `line_number`, `column_number`

---
## Grammar Rules (CFG)
The parser is based on the following **context-free grammar** (CFG) as provided in the last assignment, A2:
```
Prog           ->  procedure idt Args is
                   DeclarativePart
                   Procedures
                   begin
                   SeqOfStatements
                   end idt;

DeclarativePart -> IdentifierList : TypeMark ; DeclarativePart | ε

IdentifierList  -> idt | IdentifierList , idt

TypeMark       -> integert | realt | chart | const assignop Value 

Value          -> NumericalLiteral

Procedures     -> Prog Procedures | ε

Args           -> ( ArgList ) | ε

ArgList        -> Mode IdentifierList : TypeMark MoreArgs

MoreArgs       -> ; ArgList | ε

Mode           -> in | out | inout | ε

SeqOfStatements -> ε
```

---
## How to Run
+## Installation and Usage
+
+To install the `jakadac` package and make the parser driver available:
+```bash
+cd <project-root>
+pip install -e .
+```
+
+Then you can run the parser directly from the assignments folder:
+```bash
+python assignments/A3_Recursive_Parser/JohnA3.py <input_file.ada> [output_file.txt]
+```
+
+Or use the central test runner:
+```bash
+python tests/test_runner/test_runner.py --driver JohnA3 [--all-tests]
+```

### Prerequisites
- **Python 3.10+**
- **prettytable** (optional for symbol table)
- Ensure you have the **Lexical Analyzer** (`JohnA1.py`) working, as it generates the token list.
### Installation
#### 1. Clone the Repository:
```bash
git clone https://github.com/jakujobi/Ada_Compiler_Construction.git
```
#### 2. Navigate to the Parser Directory:
```bash
cd Ada_Compiler_Construction/A3-RecursiveDescentParser
```
#### 3. Set Up a Virtual Environment (Optional but Recommended):
```bash
python3 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
```

### Running the Parser
To run the parser on an Ada source file:
```bash
python3 JohnA3.py <input_file.ada> [output_file.txt]
```

- **`input_file.ada`** - The Ada source file to be parsed.
- **`output_file.txt`** _(optional)_ - Stores the token results.

### Example
```bash
python3 JohnA3.py example.ada parse_output.txt
```
This will:
1. Tokenize the source code.
2. Parse the tokens using the **Recursive Descent Parser**.
3. Display **parsing steps**, **error reports**, and **parse tree**.
4. Save the output (if specified).

---
## Example Output

### Tokens Generated
```
Token Type      | Lexeme                  | Value
---------------------------------------------------
PROCEDURE       | procedure                | None
ID              | my_program               | None
LPAREN          | (                        | None
...
END             | end                      | None
ID              | my_program               | None
SEMICOLON       | ;                        | None
EOF             | EOF                      | None
```

### Parse Tree (Indented Format)
```
Prog
├── PROCEDURE: procedure
├── ID: my_program
├── Args
│   ├── ε
├── IS: is
├── DeclarativePart
│   ├── ε
├── Procedures
│   ├── ε
├── BEGIN: begin
├── SeqOfStatements
│   ├── ε
├── END: end
└── ID: my_program
    └── SEMICOLON: ;
```

---
## Error Handling and Recovery
The parser supports **two error-handling modes**:
### 1. Stop-on-Error Mode (`stop_on_error=True`)
- If enabled, the parser **stops immediately** on an error.
- Prompts the user:
```
Error at line 4: Expected 'BEGIN', found 'END'
Stop on error? (y/n): 
```
- If the user enters `y`, the parsing **terminates**.

### 2. Panic Mode Recovery (`panic_mode_recover=True`)
- Instead of stopping, the parser **skips tokens** until a safe point.
- Example:
```
Error: Unexpected token 'END', skipping until 'SEMICOLON'
```

---
## Design Decisions
### Recursive Descent Approach
- Each **non-terminal** has a corresponding **method** (`parseProg()`, `parseDeclarativePart()`, etc.).
- Uses **backtracking-free LL(1) parsing**.
### Modular Structure
- Keeps parsing logic separate from **lexical analysis** and **logging**.
### Error Resilience
- Implements **Stop-on-Error** and **Panic Mode Recovery**.
### Parse Tree Construction
- Users can **enable/disable tree printing**.
- Uses **clear indentation** and **connectors** (`├──`, `└──`, `│`).

---
## Acknowledgements and Ethical Use of AI
### Use of AI in Development
- **AI LLM Models** like DeepSeek-R1-Distill-Qwen-14B (**Locally run**) and Cody AI (**integrated into IDE**) assisted in:
    - Code documentation including parts of this README.
    - Improving error handling strategies.
    - Suggested structured tree printing techniques.
- I manually reviewed **all AI suggestions were manually reviewed** before integrating them.
	- In most cases, I also created multiple suggestions by the different models, and selectively edited and combined the parts I deemed helpful.

### Ethical Considerations
- The project is licensed under the **Hippocratic License**.
- **Not for use** in **military, surveillance, or ecocide applications**.
- Promotes **ethical AI and open-source** usage.

---
## Contributing
Contributions are welcome! To contribute:
1. Fork the repository.
2. Implement your changes.
3. Submit a pull request with **detailed documentation**.

```cardlink
url: https://github.com/jakujobi/Ada_Compiler_Construction
title: "GitHub - jakujobi/Ada_Compiler_Construction: Compiler for ADA written in python for CSC 446"
description: "Compiler for ADA written in python for CSC 446. Contribute to jakujobi/Ada_Compiler_Construction development by creating an account on GitHub."
host: github.com
favicon: https://github.githubassets.com/favicons/favicon.svg
image: https://opengraph.githubassets.com/747d7d84f5371f2a6a1ef9b8a95667e55c6b1fad44b1364a7c94d2a7f526020c/jakujobi/Ada_Compiler_Construction
```

---
## License
[![Hippocratic License HL3](https://img.shields.io/static/v1?label=Hippocratic%20License&message=HL3-BOD-CL-ECO-LAW-MEDIA-MIL-SV&labelColor=5e2751&color=bc8c3d)](https://firstdonoharm.dev/version/3/0/bod-cl-eco-law-media-mil-sv.html)

---
## Contributors
Right now, it's just me, John Akujobi

```cardlink
url: https://github.com/jakujobi/
title: "jakujobi - Overview"
description: "jakujobi has 44 repositories available. Follow their code on GitHub."
host: github.com
favicon: https://github.githubassets.com/favicons/favicon.svg
image: https://avatars.githubusercontent.com/u/106095092?v=4?s=400
```
